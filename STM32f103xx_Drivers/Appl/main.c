/**********************************************************************************************************************
 *  FILE DESCRIPTION
 *  -----------------------------------------------------------------------------------------------------------------*/
/**        \file  FileName.c
 *        \brief
 *
 *      \details
 *
 *
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/
#include "MemoryMap.h"
#include "PlatformTypes.h"
#include "Nvic.h"
#include "Rcc.h"
#include "Afio.h"
#include "port.h"
#include "Usart.h"

/**********************************************************************************************************************
 *  LOCAL MACROS CONSTANT\FUNCTION
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL DATA
 *********************************************************************************************************************/
static uint16 buffer=0;
/**********************************************************************************************************************
 *  LOCAL FUNCTION PROTOTYPES
 *********************************************************************************************************************/
void uart_reciver_callback(void);
void setup(void);
/**********************************************************************************************************************
 *  LOCAL FUNCTIONS
 *********************************************************************************************************************/
int main()
{
	setup();
	
	while (1)
	{
	}
}
void uart_reciver_callback()
{
	USART_Recieve(Usart_Usart1,&buffer);
	USART_Send(Usart_Usart1,buffer);

}

/******************************************************************************
 * \Syntax          : void setup(void)
 * \Description     : initialize the system
 *
 * \Sync\Async      : Synchronous
 * \Reentrancy      : Non Reentrant
 * \Parameters (in) : None
 * \Parameters (out): None
 * \Return value:   : None
 * 
 *******************************************************************************/
void setup(void)
{
	RCC->CFGR &= ~(0b11); //force system to use HSI RC
	NVIC_Init();
	RCC_Init();
	Port_Init();
	AFIO_Init();
	USART_Init();
	USART_EnableRxNotification(Usart_Usart1, uart_reciver_callback);
}

/**********************************************************************************************************************
 *  END OF FILE: main.c
 *********************************************************************************************************************/























