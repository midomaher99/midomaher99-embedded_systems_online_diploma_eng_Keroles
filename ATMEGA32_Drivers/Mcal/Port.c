/*
 * Port.c
 *
 *      Author: ENG: Mohame Mostafa Maher
 *      contact: mohamed.mostafa.maher.999@gmail.com
 *      details:IO Port driver  
 */
/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/
#include <avr/io.h>
#include "MemoryMap.h"
#include "PlatformTypes.h"
#include "Port_Types.h"
#include "Port_Cfg.h"
/**********************************************************************************************************************
 *  LOCAL MACROS CONSTANT\FUNCTION
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTION PROTOTYPES
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTIONS
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL FUNCTIONS
 *********************************************************************************************************************/

/******************************************************************************
 * \Syntax          : void Port_Init(void)
 * \Description     : Initialize the requres pins directions and internall pull-up whichh is set in 
 *                    Port_Lcfg.c file
 *
 * \Sync\Async      : Synchronous
 * \Reentrancy      : Non Reentrant
 * \Parameters (in) : None
 * \Parameters (out): None
 * \Return value:   : none
 *******************************************************************************/
void PORT_Init(void)
{
    uint8 portBase = 0;
    uint8 pinNumber=0;
    uint8 i;

    //global pull up Enable/ Disable
    SFIOR &=~ (1<< 2);
    SFIOR |= (!PULLUP_ENABLE )<< 2;

    for(i=0; i<Port_ConfigArraySize; i++)
    {   
        portBase=(Port_ConfigArray[i].pinID >> 4);
        pinNumber = (Port_ConfigArray[i].pinID & 0xF);
        IO(portBase)->DDR =0; 
        IO(portBase)->PORT =0;

        IO(portBase)->DDR =Port_ConfigArray[i].direction << pinNumber; 
        IO(portBase)->PORT =Port_ConfigArray[i].internallAttach << pinNumber; 
    }
}

/**********************************************************************************************************************
 *  END OF FILE: Port`.c
 *********************************************************************************************************************/
